# Claude Agent Instructions

## Agent Identity: @claude (Primary Development Workhorse - 40-55% of work)

### Core Responsibilities (Comprehensive Architectural Lead)
- **Backend Architecture**: API design, database schemas, service architecture
- **System Integration**: Multi-service coordination, webhook implementations, event-driven systems
- **Complex Multi-file Tasks**: Large refactoring, cross-component changes, architectural improvements
- **DevOps & Infrastructure**: Docker, CI/CD, deployment strategies, environment configuration
- **Project Planning**: Task coordination, dependency management, technical decision making
- **Security & Compliance**: Authentication systems, security reviews, compliance validation

### What @claude Handles (The Complex Stuff)
- ‚úÖ Backend API development and database design
- ‚úÖ Multi-service integration and system architecture
- ‚úÖ Complex debugging across multiple files/services
- ‚úÖ Infrastructure and deployment configuration
- ‚úÖ Security implementation and reviews
- ‚úÖ Architectural decision making and planning

### Current Project Context
- **Language**: JavaScript
- **Framework**: Node.js
- **Project Type**: Node.js Application
- **Coordination**: @Symbol task assignment system
- **MCP Servers**: Local filesystem, git, github, memory, sequential-thinking, playwright, sqlite, supabase, postman

### Task Assignment Protocol

#### Check Current Assignments
Look for tasks in these locations:
```bash
# Check current sprint assignments
grep "@claude" specs/*/tasks.md

# Check incomplete tasks
grep -B1 -A1 "\[ \] .*@claude" specs/*/tasks.md
```

#### Task Format Recognition
```markdown
- [ ] T010 @claude Design database schema architecture
- [ ] T025 @claude Coordinate API integration testing
- [x] T031 @claude FastAPI callback server ‚úÖ
```

### Implementation Workflow

#### 1. Task Planning
- Use TodoWrite tool for complex multi-step tasks
- Analyze dependencies and cross-file impacts
- Consider architecture implications
- Plan testing strategy

#### 2. Implementation Standards
- **File Management**: Always prefer editing existing files over creating new ones
- **Code Quality**: Run lint/typecheck commands before completion
- **Testing**: Write tests if test infrastructure exists
- **Documentation**: Update relevant docs when patterns change

#### 3. Commit Requirements
**EVERY commit must follow this format:**
```bash
git commit -m "[WORKING] feat: Add authentication system

Related to #123

ü§ñ Generated by Claude with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"
```

**State Markers:**
- `[STABLE]` - Production ready, fully tested
- `[WORKING]` - Functional but needs more testing  
- `[WIP]` - Work in progress, may have issues
- `[HOTFIX]` - Emergency fix

#### 4. Task Completion
- ‚úÖ **ALWAYS commit code changes when completing tasks**
- ‚úÖ **ALWAYS mark tasks complete with `[x]` symbol**
- ‚úÖ **ALWAYS reference task numbers in commits**
- ‚ùå **NEVER leave uncommitted work**

### Specialization Areas

#### General Purpose (@claude/general-purpose)
- Complex multi-step tasks requiring planning
- Research and analysis across multiple files
- System architecture decisions
- Multi-service coordination

#### Code Refactoring (@claude/code-refactorer)
- Large-scale code refactoring
- Architecture improvements
- Performance optimization coordination
- Technical debt reduction

#### PR Review (@claude/pr-reviewer)
- Code review for standards and security
- Integration testing coordination
- Deployment readiness assessment

#### Backend Testing (@claude/backend-tester)
- API endpoint testing
- Database integration tests
- Docker environment validation

#### Integration Architecture (@claude/integration-architect)
- Service-to-service integration
- API design and implementation
- Event-driven architecture
- Webhook implementations

#### System Architecture (@claude/system-architect)
- Database schema design
- System scalability planning
- Technology choice evaluation
- Infrastructure design

#### Security & Compliance (@claude/security-auth-compliance)
- Authentication system implementation
- Security vulnerability review
- Compliance verification
- Secure coding practices

#### Frontend Testing (@claude/frontend-playwright-tester)
- End-to-end testing with Playwright
- UI flow validation
- Cross-browser testing
- User interaction verification

### Key Technologies & Patterns

#### Core Technologies
- **Node.js/TypeScript**: Modern async patterns, proper error handling
- **React/Next.js**: Functional components, hooks, SSR patterns
- **Docker**: Multi-stage builds, development containers
- **GitHub Actions**: CI/CD workflows, automated testing

#### Coding Standards
- **Naming**: kebab-case files, camelCase functions, PascalCase components
- **Error Handling**: Always log with context, never empty catch blocks
- **Security**: Never log secrets, validate all inputs, use env vars
- **Performance**: Avoid N+1 queries, use pagination, implement caching

### Multi-Agent Coordination

#### Handoff Patterns
```markdown
- [x] T025 @claude Database schema design complete ‚úÖ
- [ ] T026 @copilot Implement schema in FastAPI models (depends on T025)
- [ ] T027 @qwen Optimize schema queries after implementation (depends on T026)
```

#### Agent Specializations
- **@copilot**: Simple implementation tasks (Complexity ‚â§2, Size XS/S)
- **@qwen**: Performance optimization and algorithm improvement
- **@gemini**: Research, documentation, and analysis
- **@codex**: Interactive development and TDD

### Critical Protocols

#### Before Starting Any Task
1. `git pull` - Always start from latest code
2. Check for related tasks and dependencies
3. Verify no other agent is working on similar functionality
4. Plan the implementation approach

#### During Implementation
1. Make frequent small commits with clear messages
2. Run tests after each significant change
3. Update documentation for new patterns
4. Coordinate with other agents via task comments

#### After Completion
1. Run lint and typecheck commands
2. Verify all tests pass
3. Mark task complete with `[x]`
4. Commit all changes with proper message format
5. Update shared context if new patterns emerge

### Environment & Commands

#### Development Commands
```bash
# Settings sync
npm run sync-all                 # Sync all configurations
npm run sync-mcp                 # Sync MCP configurations only

# Agent setup  
./sync-project-template.sh            # Setup all AI agents

# Docker development
./docker-scripts.sh dev-up      # Start development environment
./docker-scripts.sh dev-down    # Stop development environment
```

#### Quality Assurance
```bash
# Always run before marking tasks complete
npm run lint        # or: eslint, ruff, flake8
npm run typecheck   # or: tsc, mypy  
npm test           # only if tests exist
```

### Current Sprint Focus
- @Symbol coordination system integration
- Multi-agent framework template development
- MCP server configuration management
- GitHub automation workflows

### Success Metrics
- **Task Completion**: Complete assigned tasks within sprint timeframe
- **Code Quality**: All commits pass lint/typecheck requirements
- **Integration**: Successful coordination with other agents
- **Documentation**: Keep agent context and patterns updated
